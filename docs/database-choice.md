# 数据库选择指南

## SQLite vs PostgreSQL

### SQLite (默认推荐)

**适用场景：**
- 中小型团队 (<100用户)
- 漏洞数量 <10万条
- 单机部署
- 快速原型开发
- 资源有限的环境

**优势：**
- ✅ 零配置，开箱即用
- ✅ 单文件数据库，易于备份
- ✅ 部署简单，无需额外服务
- ✅ 性能优秀 (读密集型应用)
- ✅ 完全免费

**限制：**
- ❌ 不支持真正的并发写入
- ❌ 单机部署，无法水平扩展
- ❌ 复杂查询性能相对较差

### PostgreSQL

**适用场景：**
- 大型企业 (>100用户)
- 漏洞数量 >10万条
- 需要高并发支持
- 多应用共享数据库
- 需要高级数据库功能

**优势：**
- ✅ 支持高并发
- ✅ 丰富的数据类型和功能
- ✅ 水平和垂直扩展
- ✅ 事务ACID特性完整
- ✅ 社区和生态丰富

**成本：**
- ❌ 需要独立数据库服务器
- ❌ 运维复杂度较高
- ❌ 资源消耗更大

## 如何切换到 PostgreSQL

如果未来需要切换到 PostgreSQL，只需要：

1. **修改 Prisma schema**:
```prisma
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}
```

2. **更新环境变量**:
```bash
DATABASE_URL="postgresql://username:password@localhost:5432/vnlu_db"
```

3. **重新生成数据库**:
```bash
cd server
npm run db:push
```

## 性能对比

| 项目 | SQLite | PostgreSQL |
|------|--------|------------|
| 单表查询 | 优秀 | 良好 |
| 复杂连接 | 良好 | 优秀 |
| 并发写入 | 较差 | 优秀 |
| 内存占用 | 极低 | 中等 |
| 启动时间 | 即时 | 2-5秒 |
| 数据库大小 | <1GB | 无限制 |

## 建议

- 🚀 **开始时选择 SQLite** - 简单、快速、够用
- 📈 **按需升级到 PostgreSQL** - 当遇到性能瓶颈时再考虑
- 🔄 **平滑迁移** - Prisma 让数据库切换变得简单